<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cihangir √áay Ocaƒüƒ± | QR Men√º</title>
  <meta name="description" content="Cihangir √áay Ocaƒüƒ± QR Men√º" />
  <meta name="theme-color" content="#0b1220">

  <!-- ‚úÖ iPhone ana ekrana ekleme (PWA g√∂r√ºn√ºm√º) -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Cihangir Men√º">
  <link rel="apple-touch-icon" href="./assets/apple-touch-icon.png">

  <!-- ‚úÖ Android PWA i√ßin manifest (tek dosya deƒüil; birazdan anlatacaƒüƒ±m) -->
  <link rel="manifest" href="./manifest.webmanifest">

  <style>
    :root{
      --bg:#0b1220;
      --bg2:#0f1b2f;
      --ink:#f1f5ff;
      --muted:#b7c2d6;
      --line:rgba(255,255,255,.10);

      --accent:#f5c451;    /* kehribar */
      --accent2:#2dd4bf;   /* teal */
      --good:#22c55e;
      --danger:#f97316;

      --shadow: 0 18px 50px rgba(0,0,0,.35);
      --r2:22px;
      --tap:52px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(245,196,81,.10), transparent 60%),
        radial-gradient(1100px 600px at 110% 10%, rgba(45,212,191,.10), transparent 60%),
        radial-gradient(1100px 600px at 20% 120%, rgba(96,165,250,.08), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      min-height:100vh;
    }

    .top{
      position:sticky; top:0; z-index:50;
      background: rgba(11,18,32,.82);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--line);
    }
    header{
      max-width:980px;
      margin:0 auto;
      padding:12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }

    .brand{display:flex;align-items:center;gap:12px;min-width:0;}
    .logo{
      width:46px;height:46px;border-radius:18px;
      background:
        radial-gradient(circle at 30% 30%, rgba(245,196,81,.95), rgba(245,196,81,.15) 60%, transparent 70%),
        radial-gradient(circle at 70% 70%, rgba(45,212,191,.85), rgba(45,212,191,.12) 60%, transparent 70%),
        rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 14px 28px rgba(0,0,0,.35);
      flex:0 0 auto;
    }
    .title{min-width:0;line-height:1.2;}
    .title h1{
      margin:0;
      font-size:16px;
      letter-spacing:.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .title p{
      margin:6px 0 0;
      font-size:12px;
      color:var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .actions{display:flex;gap:10px;flex:0 0 auto;}
    .btn{
      height:40px;
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:0 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color:var(--ink);
      text-decoration:none;
      font-weight:950;
      font-size:13px;
      box-shadow: 0 10px 24px rgba(0,0,0,.30);
      user-select:none;
      transition: transform .08s ease;
    }
    .btn:active{transform:scale(.98)}
    .btn.primary{
      border-color: rgba(245,196,81,.35);
      background: linear-gradient(135deg, rgba(245,196,81,.20), rgba(45,212,191,.10));
    }

    .wrap{max-width:980px;margin:0 auto;padding:16px 14px 98px;}
    .card{
      background: rgba(16,28,51,.78);
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--r2);
      box-shadow: var(--shadow);
    }

    /* ‚úÖ Ana ekrana ekle banner */
    .installBar{
      max-width:980px;
      margin:10px auto 0;
      padding:0 14px;
    }
    .installCard{
      display:none;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      box-shadow: 0 14px 30px rgba(0,0,0,.20);
    }
    .installLeft{display:flex;align-items:center;gap:10px;min-width:0;}
    .installIcon{
      width:40px;height:40px;border-radius:16px;
      display:grid;place-items:center;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(245,196,81,.12);
      font-size:18px;
      flex:0 0 auto;
    }
    .installText{min-width:0;}
    .installText b{
      display:block;
      font-size:13px;
      font-weight:1000;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .installText small{
      display:block;
      margin-top:2px;
      font-size:12px;
      color:rgba(183,194,214,.92);
      line-height:1.2;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .installBtns{display:flex;gap:8px;flex:0 0 auto;}
    .ibtn{
      height:40px;
      padding:0 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--ink);
      font-weight:1000;
      cursor:pointer;
      user-select:none;
    }
    .ibtn.primary{
      border-color: rgba(245,196,81,.35);
      background: linear-gradient(135deg, rgba(245,196,81,.22), rgba(45,212,191,.10));
    }
    .ibtn:active{transform:scale(.99)}

    /* ---------- √úST BLOK (Kompakt) ---------- */
    .daily{padding:12px; display:grid; gap:10px;}
    .dailyHead{
      display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
      margin-bottom:2px;
    }
    .badge{
      display:inline-flex;align-items:center;gap:8px;
      padding:9px 12px;
      border-radius:999px;
      background: rgba(245,196,81,.12);
      border:1px solid rgba(245,196,81,.25);
      color: rgba(255,255,255,.92);
      font-size:12px;
      font-weight:950;
      white-space:nowrap;
    }
    .today{font-size:12px;color:var(--muted);font-weight:850;}

    .dailyGrid{display:grid;gap:10px;}
    @media(min-width:860px){ .dailyGrid{ grid-template-columns: 1.1fr .9fr; } }

    .ayatBox{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background:
        linear-gradient(135deg, rgba(245,196,81,.10), rgba(45,212,191,.08)),
        rgba(255,255,255,.03);
      padding:10px;
    }
    .ayatTop{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;flex-wrap:wrap;}
    .ayatRef{font-size:12px;color:var(--muted);font-weight:900;}

    .ayatArab{
      margin-top:10px;
      direction:rtl;
      text-align:right;
      font-size:17px;
      line-height:1.6;
      font-weight:900;
      color: rgba(255,255,255,.95);
      letter-spacing:.1px;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }
    .ayatTr{
      margin-top:8px;
      font-size:12px;
      color: rgba(183,194,214,.92);
      line-height:1.45;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }
    .vecizeBox{
      margin-top:10px;
      padding:10px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .vecizeTop{
      display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
    }
    .vecizeTitle{
      display:inline-flex;align-items:center;gap:8px;
      font-size:12px;
      font-weight:950;
      color: rgba(255,255,255,.92);
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(45,212,191,.22);
      background: rgba(45,212,191,.10);
    }
    .vecizeText{
      margin-top:8px;
      font-size:13px;
      font-weight:900;
      color: rgba(255,255,255,.92);
      line-height:1.35;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }

    .prayerBox{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      padding:10px;
    }
    .prayerTop{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;flex-wrap:wrap;}
    .prayerTitle{margin:0;font-size:13px;letter-spacing:.2px;font-weight:950;}
    .loc{font-size:12px;color:var(--muted);font-weight:850;}
    .status{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(45,212,191,.10);
      color: rgba(255,255,255,.90);
      font-size:12px;font-weight:950;
      white-space:nowrap;
    }

    .times{
      margin-top:10px;
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:8px;
    }
    .timePill{
      padding:10px 10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .timePill b{font-size:11px;color: rgba(255,255,255,.80);}
    .timePill span{font-weight:1000;font-size:12px;color: rgba(255,255,255,.95);}
    .timePill.green{ background: rgba(34,197,94,.12); border-color: rgba(34,197,94,.22); }
    .timePill.orange{ background: rgba(249,115,22,.10); border-color: rgba(249,115,22,.20); }

    #nextLine{
      margin-top:10px;
      border:1px solid rgba(245,196,81,.20);
      background: rgba(245,196,81,.08);
      padding:10px 10px;
      border-radius:14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    #nextLine b{font-size:11px;color:rgba(255,255,255,.80)}
    #nextLine span{font-size:11px;color:rgba(255,255,255,.92);font-weight:1000}

    .miniActions{
      margin-top:10px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .smallBtn{
      height:44px;
      padding:0 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      font-weight:950;
      font-size:13px;
      cursor:pointer;
      color: var(--ink);
      box-shadow: 0 12px 26px rgba(0,0,0,.25);
      user-select:none;
      white-space:nowrap;
    }
    .smallBtn.primary{
      border-color: rgba(245,196,81,.35);
      background: linear-gradient(135deg, rgba(245,196,81,.22), rgba(45,212,191,.10));
    }
    .hint{
      margin-top:10px;
      font-size:12px;
      color: var(--muted);
      line-height:1.45;
    }

    /* ---------- MEN√ú ALANI ---------- */
    .menuHero{margin-top:14px;padding:14px;}
    .menuHero h2{margin:0;font-size:18px;font-weight:1000;}
    .menuHero p{margin:8px 0 0;font-size:13px;color:var(--muted);line-height:1.45;}

    .toolbar{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;}
    .search{
      flex:1 1 260px;min-width:220px;
      height: var(--tap);
      padding:0 12px;border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color:var(--ink);
      outline:none;font-size:14px;
      box-shadow: 0 12px 26px rgba(0,0,0,.25);
    }
    .search::placeholder{color: rgba(183,194,214,.72)}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;}
    .tab{
      height: 42px;
      padding:0 12px;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color:rgba(255,255,255,.92);
      font-weight:950;font-size:12px;
      cursor:pointer;user-select:none;
      box-shadow: 0 12px 26px rgba(0,0,0,.22);
      transition: transform .08s ease;
      display:inline-flex;align-items:center;gap:8px;
    }
    .tab:active{transform:scale(.99)}
    .tab.active{
      border-color: rgba(245,196,81,.40);
      background: rgba(245,196,81,.16);
      color: rgba(255,255,255,.95);
    }

    .list{margin-top:14px;display:grid;gap:10px;}
    .sectionTitle{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      padding:12px;border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      box-shadow: 0 12px 26px rgba(0,0,0,.22);
    }
    .sectionLeft{display:flex;align-items:center;gap:10px;min-width:0;}
    .sectionIcon{
      width:42px;height:42px;border-radius:16px;
      display:grid;place-items:center;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(245,196,81,.12);
      flex:0 0 auto;
      font-size:18px;
    }
    .sectionText h3{margin:0;font-size:14px;font-weight:1000;}
    .sectionText p{margin:6px 0 0;font-size:12px;color:var(--muted);}
    .chip2{
      font-size:11px;padding:7px 10px;border-radius:999px;
      border:1px solid rgba(45,212,191,.25);
      background: rgba(45,212,191,.10);
      color: rgba(255,255,255,.88);
      font-weight:950;
      white-space:nowrap;
    }

    .item{
      display:flex;gap:12px;align-items:center;
      padding:12px;border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      box-shadow: 0 14px 30px rgba(0,0,0,.22);
    }
    .iIcon{
      width:44px;height:44px;border-radius:16px;
      display:grid;place-items:center;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      flex:0 0 auto;
      font-size:18px;
    }
    .meta{min-width:0;flex:1 1 auto;}
    .meta .name{margin:0;font-weight:1000;font-size:15px;}
    .meta .desc{margin:6px 0 0;font-size:12px;color:var(--muted);line-height:1.35;}
    .right{flex:0 0 auto;text-align:right;display:flex;flex-direction:column;align-items:flex-end;gap:6px;}
    .price{font-weight:1100;font-size:16px;color:rgba(255,255,255,.95);}
    .ask{
      font-size:11px;padding:7px 10px;border-radius:999px;
      border:1px dashed rgba(255,255,255,.18);
      background: rgba(183,194,214,.10);
      color: rgba(255,255,255,.82);
      font-weight:950;
      white-space:nowrap;
    }
    .tag{
      font-size:11px;padding:7px 10px;border-radius:999px;
      border:1px solid rgba(245,196,81,.25);
      background: rgba(245,196,81,.10);
      color: rgba(255,255,255,.88);
      font-weight:950;
      white-space:nowrap;
    }

    .infoGrid{margin-top:14px;display:grid;gap:10px;grid-template-columns:1fr;}
    @media(min-width:860px){.infoGrid{grid-template-columns:1fr 1fr;}}
    .info{
      padding:12px;border-radius:18px;border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      box-shadow: 0 12px 26px rgba(0,0,0,.22);
    }
    .info h4{
      margin:0;font-size:13px;
      color: rgba(245,196,81,.95);
      display:flex;gap:8px;align-items:center;font-weight:1000;
    }
    .info p{margin:8px 0 0;color:var(--muted);font-size:13px;line-height:1.45;}

    .footer{margin-top:14px;text-align:center;color:rgba(183,194,214,.92);font-size:12px;line-height:1.6;}

    .bottomBar{
      position:fixed;left:0;right:0;bottom:0;z-index:60;
      padding:10px 12px;
      background: rgba(11,18,32,.88);
      border-top:1px solid var(--line);
      backdrop-filter: blur(10px);
    }
    .barInner{max-width:980px;margin:0 auto;display:flex;gap:10px;}
    .barBtn{
      flex:1 1 0;
      height:58px;
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:0 12px;border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color:var(--ink);text-decoration:none;font-weight:1000;
      box-shadow: 0 14px 30px rgba(0,0,0,.30);
    }
    .barBtn.primary{
      background: linear-gradient(135deg, rgba(245,196,81,.22), rgba(45,212,191,.10));
      border-color: rgba(245,196,81,.32);
    }
    .barText{display:flex;flex-direction:column;align-items:flex-start;line-height:1.12;}
    .barBtn small{display:block;font-weight:900;font-size:11px;color:rgba(183,194,214,.92);margin-top:2px;}
  </style>
</head>

<body>
  <div class="top">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">
          <h1 id="shopName"></h1>
          <p id="shopSub"></p>
        </div>
      </div>
      <div class="actions">
        <a class="btn" id="miniWhats" href="#" aria-label="WhatsApp">üí¨</a>
        <a class="btn primary" id="miniCall" href="#" aria-label="Ara">üìû</a>
      </div>
    </header>

    <!-- ‚úÖ Ana ekrana ekleme y√∂nlendirmesi -->
    <div class="installBar">
      <div class="installCard" id="installCard">
        <div class="installLeft">
          <div class="installIcon">üì≤</div>
          <div class="installText">
            <b>Ana ekrana ekle</b>
            <small id="installHint">Tek dokunu≈üla uygulama gibi kullan.</small>
          </div>
        </div>
        <div class="installBtns">
          <button class="ibtn" id="installHide">Kapat</button>
          <button class="ibtn primary" id="installAction">Ekle</button>
        </div>
      </div>
    </div>
  </div>

  <div class="wrap">
    <section class="card daily">
      <div class="dailyHead">
        <span class="badge">üìå G√ºnl√ºk Bilgi</span>
        <span class="today" id="todayLine"></span>
      </div>

      <div class="dailyGrid">
        <div class="ayatBox">
          <div class="ayatTop">
            <span class="badge">üìñ G√ºn√ºn Ayeti</span>
            <span class="ayatRef" id="ayatRef"></span>
          </div>

          <div class="ayatArab" id="ayatArab"></div>
          <div class="ayatTr" id="ayatTr"></div>

          <div class="vecizeBox">
            <div class="vecizeTop">
              <div class="vecizeTitle">üßæ Risale-i Nur Vecize</div>
              <div class="ayatRef" id="vecizeRef">Kƒ±sa</div>
            </div>
            <div class="vecizeText" id="vecizeText"></div>
          </div>
        </div>

        <div class="prayerBox">
          <div class="prayerTop">
            <div>
              <div class="prayerTitle">üïå Namaz Vakitleri</div>
              <div class="loc" id="locText">Kocaeli / √áayƒ±rova</div>
            </div>
            <span class="status" id="calcBadge">‚è≥</span>
          </div>

          <div class="times" id="prayerGrid"></div>

          <div id="nextLine">
            <b>‚è±Ô∏è Sonraki vakit</b>
            <span><span id="nextPrayerName">‚Äî</span> ‚Ä¢ <span id="nextPrayerCountdown">--:--:--</span></span>
          </div>

          <div class="miniActions">
            <button class="smallBtn primary" id="btnRefresh">üîÑ Yenile</button>
          </div>

          <div class="hint" id="hint">Vakitler Kocaeli / √áayƒ±rova i√ßin sabittir.</div>
        </div>
      </div>
    </section>

    <section class="card menuHero" style="margin-top:14px;">
      <h2 id="heroTitle"></h2>
      <p id="heroText"></p>
    </section>

    <div class="toolbar">
      <input class="search" id="search" placeholder="√úr√ºn ara: √ßay, tost, yumurta..." />
      <div class="tabs" id="tabs"></div>
    </div>

    <div class="list" id="list"></div>

    <div class="infoGrid">
      <div class="info">
        <h4>üïí √áalƒ±≈üma Saatleri</h4>
        <p id="hours"></p>
      </div>
      <div class="info">
        <h4>üìç Adres</h4>
        <p id="address"></p>
      </div>
    </div>

    <div class="footer">
      ¬© <span id="year"></span> <span id="footName"></span> ‚Ä¢ QR Men√º
    </div>
  </div>

  <div class="bottomBar">
    <div class="barInner">
      <a class="barBtn primary" id="callBtn" href="#">
        üìû
        <span class="barText">
          Ara
          <small id="phoneLabel"></small>
        </span>
      </a>
      <a class="barBtn" id="whatsBtn" href="#">
        üí¨
        <span class="barText">
          WhatsApp
          <small>Hƒ±zlƒ± mesaj</small>
        </span>
      </a>
    </div>
  </div>

  <script>
    const CONFIG = {
      shopName: "Cihangir √áay Ocaƒüƒ±",
      shopSub: "Sƒ±cak √ßay, temiz hizmet ‚òï",
      phoneLocal: "0507 319 02 78",
      phoneE164: "+905073190278",
      whatsappNumber: "905073190278",
      hours: "Her g√ºn 09:00 ‚Äì 22:00",
      address: "Kocaeli / √áayƒ±rova ",
      heroTitle: "QR Men√º",
      heroText: "Fiyatlar g√ºnceldir. Aramak veya WhatsApp‚Äôtan yazmak i√ßin alttaki butonlarƒ± kullanabilirsiniz."
    };

    // ‚úÖ Sabit √áayƒ±rova koordinatƒ±
    const CAYIROVA = { name:"Kocaeli / √áayƒ±rova", lat:40.824, lon:29.372 };

    // price:0 => ‚ÄúFiyat Sor‚Äù
    const MENU = [
      { category: "ƒ∞√áE√áEKLER", name: "√áay", price: 15, icon: "üçµ", desc: "Demli, sƒ±cak", tag: "Sƒ±cak" },
      { category: "ƒ∞√áE√áEKLER", name: "T√ºrk Kahvesi", price: 85, icon: "‚òï", desc: "K√∂z tadƒ±nda", tag: "Kahve" },
      { category: "ƒ∞√áE√áEKLER", name: "Nescafe", price: 40, icon: "ü•§", desc: "3'√º 1 arada / se√ßenekli", tag: "Kahve" },
      { category: "ƒ∞√áE√áEKLER", name: "Oralet (√áe≈üitleri)", price: 15, icon: "üçä", desc: "Portakal / elma vb.", tag: "Sƒ±cak" },

      { category: "TOST √áE≈ûƒ∞TLERƒ∞", name: "Sadece Ka≈üarlƒ± Tost", price: 0, icon: "ü•™", desc: "Bol ka≈üarlƒ±", tag: "Tost" },
      { category: "TOST √áE≈ûƒ∞TLERƒ∞", name: "Sadece Sucuklu Tost", price: 0, icon: "ü•™", desc: "Bol sucuklu", tag: "Tost" },
      { category: "TOST √áE≈ûƒ∞TLERƒ∞", name: "Ka≈üarlƒ± + Sucuklu (Karƒ±≈üƒ±k)", price: 0, icon: "ü•™", desc: "Karƒ±≈üƒ±k", tag: "Tost" },
     // { category: "TOST √áE≈ûƒ∞TLERƒ∞", name: "Kavurmalƒ± Tost", price: 0, icon: "ü•™", desc: "Kavurmalƒ±", tag: "Tost" },
     // { category: "TOST √áE≈ûƒ∞TLERƒ∞", name: "Kavurmalƒ± + Ka≈üarlƒ±", price: 0, icon: "ü•™", desc: "Kavurma + ka≈üar", tag: "Tost" },
      //{ category: "TOST √áE≈ûƒ∞TLERƒ∞", name: "Kavurmalƒ± + Sucuklu", price: 0, icon: "ü•™", desc: "Kavurma + sucuk", tag: "Tost" },

     // { category: "Kahvaltƒ±lƒ±k", name: "Ha≈ülanmƒ±≈ü Yumurta", price: 0, icon: "ü•ö", desc: "Sƒ±cacƒ±k", tag: "Yiyecek" },
      //{ category: "Kahvaltƒ±lƒ±k", name: "Tavada Yumurta", price: 0, icon: "üç≥", desc: "ƒ∞stersen tereyaƒülƒ±", tag: "Yiyecek" }
    ];

    // ‚úÖ Kur‚Äôan ayeti: Arap√ßa + kƒ±sa anlam (√∂zet)
    const AYAT_LIST = [
      { ref:"Mutaffifin 83:1-3", ar:"ŸàŸéŸäŸíŸÑŸå ŸÑŸêŸÑŸíŸÖŸèÿ∑ŸéŸÅŸëŸêŸÅŸêŸäŸÜŸé ‚Ä¢ ÿßŸÑŸëŸéÿ∞ŸêŸäŸÜŸé ÿ•Ÿêÿ∞Ÿéÿß ÿßŸÉŸíÿ™ŸéÿßŸÑŸèŸàÿß ÿπŸéŸÑŸéŸâ ÿßŸÑŸÜŸëŸéÿßÿ≥Ÿê ŸäŸéÿ≥Ÿíÿ™ŸéŸàŸíŸÅŸèŸàŸÜŸé ‚Ä¢ ŸàŸéÿ•Ÿêÿ∞Ÿéÿß ŸÉŸéÿßŸÑŸèŸàŸáŸèŸÖŸí ÿ£ŸéŸàŸí ŸàŸéÿ≤ŸéŸÜŸèŸàŸáŸèŸÖŸí ŸäŸèÿÆŸíÿ≥Ÿêÿ±ŸèŸàŸÜŸé", tr:"√ñl√ß√º/tartƒ±da hile yapanlara yazƒ±klar olsun; alƒ±rken tam, verirken eksik yapanlar‚Ä¶" },
      { ref:"Rahman 55:9", ar:"ŸàŸéÿ£ŸéŸÇŸêŸäŸÖŸèŸàÿß ÿßŸÑŸíŸàŸéÿ≤ŸíŸÜŸé ÿ®ŸêÿßŸÑŸíŸÇŸêÿ≥Ÿíÿ∑Ÿê ŸàŸéŸÑŸéÿß ÿ™ŸèÿÆŸíÿ≥Ÿêÿ±ŸèŸàÿß ÿßŸÑŸíŸÖŸêŸäÿ≤ŸéÿßŸÜŸé", tr:"Tartƒ±yƒ± adaletle tutun; √∂l√ß√ºy√º eksik yapmayƒ±n." },
      { ref:"En'√¢m 6:152", ar:"ŸàŸéÿ£ŸéŸàŸíŸÅŸèŸàÿß ÿßŸÑŸíŸÉŸéŸäŸíŸÑŸé ŸàŸéÿßŸÑŸíŸÖŸêŸäÿ≤ŸéÿßŸÜŸé ÿ®ŸêÿßŸÑŸíŸÇŸêÿ≥Ÿíÿ∑Ÿê €ñ ŸÑŸéÿß ŸÜŸèŸÉŸéŸÑŸëŸêŸÅŸè ŸÜŸéŸÅŸíÿ≥Ÿãÿß ÿ•ŸêŸÑŸëŸéÿß ŸàŸèÿ≥ŸíÿπŸéŸáŸéÿß", tr:"√ñl√ß√º ve tartƒ±yƒ± adaletle tam yapƒ±n; kimseye g√ºc√ºn√ºn √ºst√ºnde y√ºk y√ºklenmez." },
      { ref:"M√¢ide 5:1", ar:"ŸäŸéÿß ÿ£ŸéŸäŸëŸèŸáŸéÿß ÿßŸÑŸëŸéÿ∞ŸêŸäŸÜŸé ÿ¢ŸÖŸéŸÜŸèŸàÿß ÿ£ŸéŸàŸíŸÅŸèŸàÿß ÿ®ŸêÿßŸÑŸíÿπŸèŸÇŸèŸàÿØŸê", tr:"Ey iman edenler! Ahdi/s√∂zle≈ümeyi yerine getirin." },
      { ref:"Bakara 2:286", ar:"ŸÑŸéÿß ŸäŸèŸÉŸéŸÑŸëŸêŸÅŸè ÿßŸÑŸÑŸëŸéŸáŸè ŸÜŸéŸÅŸíÿ≥Ÿãÿß ÿ•ŸêŸÑŸëŸéÿß ŸàŸèÿ≥ŸíÿπŸéŸáŸéÿß", tr:"Allah kimseye g√ºc√ºn√ºn yetmediƒüi y√ºk y√ºklemez." },
      { ref:"Nahl 16:90", ar:"ÿ•ŸêŸÜŸëŸé ÿßŸÑŸÑŸëŸéŸáŸé ŸäŸéÿ£ŸíŸÖŸèÿ±Ÿè ÿ®ŸêÿßŸÑŸíÿπŸéÿØŸíŸÑŸê ŸàŸéÿßŸÑŸíÿ•Ÿêÿ≠Ÿíÿ≥ŸéÿßŸÜŸê", tr:"Allah adaleti ve iyiliƒüi emreder." }
    ];

    // ‚úÖ Esnafa uygun kƒ±sa vecizeler (kƒ±sa, afi≈ülik)
    const RISALE_TRADE = [
      { ref:"Vecize", text:"Helal dairesi keyfe k√¢fidir." },
      { ref:"Vecize", text:"ƒ∞ktisat berekettir; israf bereketsizliktir." },
      { ref:"Vecize", text:"Doƒüruluk ve kanaat kazancƒ± bereketlendirir." },
      { ref:"Vecize", text:"ƒ∞hl√¢s, i≈üin ruhudur; bereketin kapƒ±sƒ±dƒ±r." },
      { ref:"Vecize", text:"Kul hakkƒ± ticarette en b√ºy√ºk vebaldir." },
      { ref:"Vecize", text:"Az kazan√ßta kanaat, √ßok kazan√ßta ≈ü√ºk√ºr." }
    ];

    // Namaz vakitleri (AlAdhan)
    const ALADHAN_METHOD = 13;

    const $ = (id) => document.getElementById(id);

    function todayTR(){
      return new Date().toLocaleDateString("tr-TR", { weekday:"long", year:"numeric", month:"long", day:"numeric" });
    }
    function hashIndex(key, mod){
      let h = 0;
      for (let i=0;i<key.length;i++) h = (h*31 + key.charCodeAt(i)) >>> 0;
      return h % mod;
    }
    function pickOfDay(list, salt){
      const d = new Date();
      const key = `${salt}-${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;
      return list[hashIndex(key, list.length)];
    }

    function renderDaily(){
      const a = pickOfDay(AYAT_LIST, "ayat");
      $("ayatRef").textContent = a.ref;
      $("ayatArab").textContent = a.ar;
      $("ayatTr").textContent = a.tr;

      const v = pickOfDay(RISALE_TRADE, "vecize");
      $("vecizeRef").textContent = v.ref;
      $("vecizeText").textContent = v.text;
    }

    function applyConfig(){
      $("shopName").textContent = CONFIG.shopName;
      $("footName").textContent = CONFIG.shopName;
      $("shopSub").textContent = CONFIG.shopSub;

      $("heroTitle").textContent = CONFIG.heroTitle;
      $("heroText").textContent = CONFIG.heroText;

      $("hours").textContent = CONFIG.hours;
      $("address").textContent = CONFIG.address;

      $("phoneLabel").textContent = CONFIG.phoneLocal;
      $("todayLine").textContent = todayTR();

      const msg = encodeURIComponent("Merhaba, men√ºden sipari≈ü vermek istiyorum.");
      const wa = `https://wa.me/${CONFIG.whatsappNumber}?text=${msg}`;
      $("whatsBtn").href = wa;
      $("miniWhats").href = wa;

      const tel = `tel:${CONFIG.phoneE164}`;
      $("callBtn").href = tel;
      $("miniCall").href = tel;

      $("locText").textContent = CAYIROVA.name;
    }

    function formatPrice(p){
      if (!p || Number(p) === 0) return `<span class="ask">Fiyat Sor</span>`;
      return `<span class="price">${Number(p).toFixed(0)} ‚Ç∫</span>`;
    }
    function catIcon(cat){
      if (cat === "ƒ∞√ßecekler") return "‚òï";
      if (cat === "Tostlar") return "ü•™";
      if (cat === "Kahvaltƒ±lƒ±k") return "üç≥";
      if (cat === "Hepsi") return "üìå";
      return "üìå";
    }
    function getCategories(){
      const set = new Set(MENU.map(x => x.category || "Men√º"));
      return ["Hepsi", ...Array.from(set)];
    }

    let state = { q:"", cat:"Hepsi" };

    function filterItems(){
      const q = (state.q || "").toLowerCase().trim();
      return MENU.filter(it => {
        const catOk = state.cat === "Hepsi" ? true : (it.category === state.cat);
        if (!catOk) return false;
        if (!q) return true;
        const hay = `${it.name||""} ${it.desc||""} ${it.tag||""} ${it.category||""}`.toLowerCase();
        return hay.includes(q);
      });
    }
    function groupByCategory(items){
      const map = new Map();
      for (const it of items){
        const k = it.category || "Men√º";
        if (!map.has(k)) map.set(k, []);
        map.get(k).push(it);
      }
      return map;
    }
    function renderTabs(){
      const el = $("tabs");
      el.innerHTML = "";
      getCategories().forEach(cat => {
        const b = document.createElement("div");
        b.className = "tab" + (state.cat === cat ? " active" : "");
        b.innerHTML = `<span>${catIcon(cat)}</span><span>${cat}</span>`;
        b.onclick = () => { state.cat = cat; renderMenu(); };
        el.appendChild(b);
      });
    }
    function renderMenu(){
      renderTabs();
      const items = filterItems();
      const list = $("list");
      list.innerHTML = "";

      if (!items.length){
        const empty = document.createElement("div");
        empty.className = "item";
        empty.style.justifyContent = "center";
        empty.innerHTML = `
          <div class="meta" style="text-align:center;">
            <p class="name">Sonu√ß bulunamadƒ±</p>
            <p class="desc">Arama kelimesini deƒüi≈ütirip tekrar deneyin.</p>
          </div>`;
        list.appendChild(empty);
        return;
      }

      const grouped = groupByCategory(items);
      for (const [cat, arr] of grouped.entries()){
        const sec = document.createElement("div");
        sec.className = "sectionTitle";
        sec.innerHTML = `
          <div class="sectionLeft">
            <div class="sectionIcon">${catIcon(cat)}</div>
            <div class="sectionText">
              <h3>${cat}</h3>
              <p>${arr.length} √ºr√ºn</p>
            </div>
          </div>
          <div class="chip2">G√ºncel</div>
        `;
        list.appendChild(sec);

        arr.forEach(it => {
          const row = document.createElement("div");
          row.className = "item";
          row.innerHTML = `
            <div class="iIcon">${it.icon || "üçΩÔ∏è"}</div>
            <div class="meta">
              <p class="name">${it.name}</p>
              <p class="desc">${it.desc || ""}</p>
            </div>
            <div class="right">
              ${formatPrice(it.price)}
              <div class="tag">${it.tag || "Men√º"}</div>
            </div>
          `;
          list.appendChild(row);
        });
      }
    }

    $("search").addEventListener("input", (e) => {
      state.q = e.target.value || "";
      renderMenu();
    });

    // ------- Namaz vakitleri -------
    function setBadge(text){ $("calcBadge").textContent = text; }
    function showHint(text){ $("hint").textContent = text; }

    function renderPrayerTimes(times){
      const want = [
        { key:"Fajr",    label:"ƒ∞msak",  cls:"green" },
        { key:"Sunrise", label:"G√ºne≈ü",  cls:"" },
        { key:"Dhuhr",   label:"√ñƒüle",   cls:"" },
        { key:"Asr",     label:"ƒ∞kindi", cls:"" },
        { key:"Maghrib", label:"Ak≈üam",  cls:"orange" },
        { key:"Isha",    label:"Yatsƒ±",  cls:"" }
      ];

      const grid = $("prayerGrid");
      grid.innerHTML = "";

      want.forEach(w => {
        const t = (times[w.key] || "--:--").toString().replace(" (TRT)","").trim();
        const div = document.createElement("div");
        div.className = "timePill " + (w.cls || "");
        div.innerHTML = `<b>${w.label}</b><span>${t}</span>`;
        grid.appendChild(div);
      });
    }

    // Sonraki vakte kalan s√ºre
    let countdownTimer = null;

    function clearCountdown(){
      if (countdownTimer){
        clearInterval(countdownTimer);
        countdownTimer = null;
      }
    }
    function pad2(n){ return String(n).padStart(2,"0"); }
    function formatHMS(ms){
      const total = Math.max(0, Math.floor(ms / 1000));
      const h = Math.floor(total / 3600);
      const m = Math.floor((total % 3600) / 60);
      const s = total % 60;
      return `${pad2(h)}:${pad2(m)}:${pad2(s)}`;
    }
    function parseTodayTimeToDate(timeStr){
      const parts = (timeStr || "").split(":");
      const h = Number(parts[0] || 0);
      const m = Number(parts[1] || 0);
      const d = new Date();
      d.setHours(h, m, 0, 0);
      return d;
    }
    function setNextPrayerUI(name, targetDate){
      $("nextPrayerName").textContent = name;
      clearCountdown();

      const tick = () => {
        const now = new Date();
        const diff = targetDate.getTime() - now.getTime();
        $("nextPrayerCountdown").textContent = formatHMS(diff);
      };

      tick();
      countdownTimer = setInterval(tick, 1000);
    }

    function getNextPrayerFromTimings(timings){
      const map = [
        { key:"Fajr",    label:"ƒ∞msak" },
        { key:"Dhuhr",   label:"√ñƒüle" },
        { key:"Asr",     label:"ƒ∞kindi" },
        { key:"Maghrib", label:"Ak≈üam" },
        { key:"Isha",    label:"Yatsƒ±" }
      ];

      const now = new Date();
      for (const it of map){
        const t = (timings[it.key] || "").toString().replace(" (TRT)","").trim();
        if (!t) continue;
        const dt = parseTodayTimeToDate(t);
        if (dt.getTime() > now.getTime()){
          return { name: it.label, date: dt };
        }
      }
      return null;
    }

    function dateDDMMYYYY(d){
      const dd = pad2(d.getDate());
      const mm = pad2(d.getMonth()+1);
      const yy = d.getFullYear();
      return `${dd}-${mm}-${yy}`;
    }

    async function fetchTomorrowByCoords(lat, lon){
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      const dateStr = dateDDMMYYYY(tomorrow);
      const url = `https://api.aladhan.com/v1/timings/${dateStr}?latitude=${encodeURIComponent(lat)}&longitude=${encodeURIComponent(lon)}&method=${ALADHAN_METHOD}`;
      const res = await fetch(url, { cache:"no-store" });
      if (!res.ok) throw new Error("Yarƒ±n vakit alƒ±namadƒ±");
      const data = await res.json();
      const t = data && data.data && data.data.timings ? data.data.timings : null;
      if (!t) throw new Error("Yarƒ±n vakit verisi yok");
      return t;
    }

    async function updateNextPrayer(timings){
      const next = getNextPrayerFromTimings(timings);
      if (next){
        setNextPrayerUI(next.name, next.date);
        return;
      }
      try{
        const tmr = await fetchTomorrowByCoords(CAYIROVA.lat, CAYIROVA.lon);
        const fajr = (tmr.Fajr || "").toString().replace(" (TRT)","").trim();
        const target = new Date();
        target.setDate(target.getDate()+1);
        const parts = fajr.split(":");
        target.setHours(Number(parts[0]||0), Number(parts[1]||0), 0, 0);
        setNextPrayerUI("Yarƒ±n ƒ∞msak", target);
      }catch(e){
        $("nextPrayerName").textContent = "Yarƒ±n ƒ∞msak";
        $("nextPrayerCountdown").textContent = "--:--:--";
      }
    }

    async function fetchByCoords(lat, lon){
      const url = `https://api.aladhan.com/v1/timings?latitude=${encodeURIComponent(lat)}&longitude=${encodeURIComponent(lon)}&method=${ALADHAN_METHOD}`;
      const res = await fetch(url, { cache:"no-store" });
      if (!res.ok) throw new Error("Vakit servisine ula≈üƒ±lamadƒ±");
      const data = await res.json();
      const t = data && data.data && data.data.timings ? data.data.timings : null;
      if (!t) throw new Error("Vakit verisi bulunamadƒ±");
      return t;
    }

    async function loadPrayerFixed(){
      setBadge("‚è≥");
      showHint("Vakitler y√ºkleniyor...");
      try{
        const t = await fetchByCoords(CAYIROVA.lat, CAYIROVA.lon);
        renderPrayerTimes(t);
        await updateNextPrayer(t);
        setBadge("‚úÖ");
        showHint("Vakitler g√ºncellendi (Kocaeli / √áayƒ±rova).");
      }catch(e){
        setBadge("‚ö†Ô∏è");
        showHint("Vakitler alƒ±namadƒ±. ƒ∞nterneti kontrol edip tekrar deneyin.");
      }
    }

    // ‚úÖ Ana ekrana ekleme (Android + iPhone y√∂nlendirme)
    function isIos(){
      return /iphone|ipad|ipod/i.test(navigator.userAgent);
    }
    function isInStandalone(){
      return (window.matchMedia && window.matchMedia('(display-mode: standalone)').matches) || (navigator.standalone === true);
    }
    function installWasDismissed(){
      try{ return localStorage.getItem("install_dismissed") === "1"; }catch(e){ return false; }
    }
    function setInstallDismissed(){
      try{ localStorage.setItem("install_dismissed","1"); }catch(e){}
    }

    let deferredPrompt = null;

    function showInstallCard(mode){
      const card = document.getElementById("installCard");
      const hint = document.getElementById("installHint");
      const act  = document.getElementById("installAction");

      if (!card || !hint || !act) return;

      if (isInStandalone() || installWasDismissed()) return;

      card.style.display = "flex";

      if (mode === "ios"){
        hint.textContent = "iPhone: Payla≈ü ‚ñ∏ ‚ÄúAna Ekrana Ekle‚Äù";
        act.textContent = "Nasƒ±l?";
        act.onclick = () => {
          alert("iPhone‚Äôda Safari‚Äôde:\n1) Payla≈ü (‚¨ÜÔ∏è)\n2) Ana Ekrana Ekle\n3) Ekle");
        };
      }else{
        hint.textContent = "Android: Tek dokunu≈üla ana ekrana ekle";
        act.textContent = "Ekle";
        act.onclick = async () => {
          if (!deferredPrompt){
            alert("Ekle se√ßeneƒüi g√∂r√ºnm√ºyorsa Chrome men√ºs√ºnden:\n‚ãÆ  ‚ñ∏ Ana ekrana ekle");
            return;
          }
          deferredPrompt.prompt();
          await deferredPrompt.userChoice;
          deferredPrompt = null;
          card.style.display = "none";
        };
      }

      document.getElementById("installHide").onclick = () => {
        card.style.display = "none";
        setInstallDismissed();
      };
    }

    window.addEventListener("beforeinstallprompt", (e) => {
      // Android Chrome
      e.preventDefault();
      deferredPrompt = e;
      showInstallCard("android");
    });

    // iOS i√ßin banner
    function maybeShowIosInstall(){
      if (isIos()) showInstallCard("ios");
    }

    // ƒ∞lk y√ºkleme
    document.getElementById("year").textContent = new Date().getFullYear();
    applyConfig();
    renderDaily();
    renderTabs();
    renderMenu();
    loadPrayerFixed();
    document.getElementById("btnRefresh").addEventListener("click", loadPrayerFixed);

    // Install banner
    setTimeout(() => {
      // Android prompt gelmezse iOS/Android manual hint
      if (!isInStandalone() && !installWasDismissed()){
        if (isIos()) {
          maybeShowIosInstall();
        } else {
          // Android‚Äôda beforeinstallprompt gelmemi≈ü olabilir (manifest yoksa)
          // yine de kullanƒ±cƒ±ya men√ºden ekleme yolunu g√∂sterelim
          showInstallCard("android");
        }
      }
    }, 700);

    // (ƒ∞steƒüe baƒülƒ±) manifest yoksa Android ‚ÄúEkle‚Äù promptu gelmeyebilir.
    // Bu y√ºzden manifest.webmanifest dosyasƒ±nƒ± da eklemen gerekiyor.
  </script>
</body>
</html>
