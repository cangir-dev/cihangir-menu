<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cihangir √áay Ocaƒüƒ± | QR Men√º</title>
  <meta name="description" content="Cihangir √áay Ocaƒüƒ± QR Men√º" />

  <!-- PWA -->
  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="theme-color" content="#0b1220">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="./assets/apple-touch-icon.png">

  <style>
    :root{
      --bg1:#070b14;
      --bg2:#0b1220;

      --text:#eaf0ff;
      --muted:rgba(234,240,255,.76);

      --card:rgba(255,255,255,.07);
      --card2:rgba(255,255,255,.05);
      --line:rgba(255,255,255,.12);

      --accent:#ffd66b;   /* sƒ±cak sarƒ± */
      --accent2:#7ee7ff;  /* ferah mavi */
      --good:#7CFFB2;

      --shadow:0 18px 55px rgba(0,0,0,.36);
      --radius:18px;
      --radius2:22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 15% -10%, rgba(255,214,107,.24), transparent 60%),
        radial-gradient(900px 520px at 110% 8%, rgba(126,231,255,.20), transparent 58%),
        radial-gradient(900px 520px at 15% 110%, rgba(124,255,178,.10), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2) 60%, var(--bg1));
      min-height:100vh;
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 18px 14px 96px; /* bottom bar bo≈üluƒüu */
    }

    /* TOP BAR */
    .top{
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(7,11,20,.94), rgba(7,11,20,.70));
      border-bottom: 1px solid rgba(255,255,255,.06);
    }

    header{
      max-width: 980px;
      margin: 0 auto;
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }

    .brand{display:flex;gap:12px;align-items:center;min-width:0;}
    .logo{
      width:46px;height:46px;border-radius:16px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,214,107,.95), rgba(255,214,107,.2) 55%, transparent 70%),
        radial-gradient(circle at 70% 70%, rgba(126,231,255,.85), rgba(126,231,255,.12) 55%, transparent 70%),
        rgba(255,255,255,.09);
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      flex:0 0 auto;
    }

    .title{min-width:0;line-height:1.15;}
    .title h1{
      margin:0;
      font-size: 16px;
      letter-spacing:.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .title p{
      margin:6px 0 0;
      font-size: 12px;
      color: var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .miniActions{display:flex;align-items:center;gap:10px;flex:0 0 auto;}

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.07);
      color: var(--text);
      text-decoration:none;
      font-weight: 950;
      font-size: 13px;
      box-shadow: 0 10px 25px rgba(0,0,0,.18);
      cursor: pointer;
      user-select:none;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:active{ transform: scale(.98); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(255,214,107,.30), rgba(126,231,255,.16));
      border-color: rgba(255,214,107,.34);
    }

    /* HERO */
    .hero{
      margin-top: 14px;
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.12);
      background: linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .heroInner{padding: 16px;display:grid;gap: 12px;}

    .heroText h2{margin: 0;font-size: 18px;letter-spacing:.2px;}
    .heroText p{margin: 8px 0 0;color: var(--muted);font-size: 13px;line-height: 1.35;}

    .badges{display:flex;gap: 8px;flex-wrap: wrap;margin-top: 12px;}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding: 8px 10px;border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(234,240,255,.82);
      font-size: 12px;
      white-space: nowrap;
    }

    .heroCards{display:grid;gap: 10px;grid-template-columns: 1fr;}
    @media (min-width: 860px){ .heroCards{grid-template-columns: 1fr 1fr;} }

    .heroCard{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      padding: 12px;
    }
    .heroCard h3{
      margin: 0;
      font-size: 13px;
      letter-spacing:.2px;
      color: var(--accent);
      display:flex;align-items:center;gap:8px;
    }
    .heroCard p{margin: 8px 0 0;font-size: 13px;line-height: 1.35;}
    .heroCard small{display:block;margin-top: 10px;color: var(--muted);font-size: 12px;}

    .installHint{
      margin-top: 10px;
      border-radius: 16px;
      border: 1px dashed rgba(255,255,255,.18);
      background: rgba(255,255,255,.04);
      padding: 10px 12px;
      color: rgba(234,240,255,.78);
      font-size: 12px;
      line-height: 1.35;
    }

    /* TOOLBAR */
    .toolbar{
      margin-top: 14px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
      justify-content: space-between;
    }

    .search{
      flex: 1 1 240px;
      min-width: 220px;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: var(--text);
      outline: none;
      font-size: 14px;
    }
    .search::placeholder{color: rgba(234,240,255,.55);}

    .tabs{display:flex;gap:8px;flex-wrap:wrap;}
    .tab{
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(234,240,255,.86);
      font-weight: 950;
      font-size: 12px;
      cursor:pointer;
      user-select:none;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .tab:active{transform: scale(.99);}
    .tab.active{
      background: linear-gradient(135deg, rgba(255,214,107,.28), rgba(126,231,255,.14));
      border-color: rgba(255,214,107,.28);
      color: var(--text);
    }

    /* LIST */
    .list{margin-top: 14px;display:grid;gap: 10px;}

    .sectionTitle{
      margin-top: 10px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
    }

    .sectionTitle .left{
      display:flex;align-items:center;gap:10px;min-width:0;
    }
    .sectionTitle .icon{
      width: 40px;height: 40px;
      border-radius: 14px;
      display:grid;place-items:center;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.10);
      flex:0 0 auto;
      font-size: 18px;
    }
    .sectionTitle h3{margin:0;font-size:14px;letter-spacing:.2px;}
    .sectionTitle p{margin:6px 0 0;font-size:12px;color:var(--muted);}
    .chip{
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.12);
      color: rgba(234,240,255,.85);
      white-space: nowrap;
    }

    .item{
      display:flex;
      gap: 12px;
      align-items: center;
      padding: 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      box-shadow: 0 10px 24px rgba(0,0,0,.18);
      transition: transform .08s ease, border-color .2s ease, background .2s ease;
    }
    .item:hover{border-color: rgba(255,214,107,.18); background: rgba(255,255,255,.06);}
    .item:active{transform: scale(.995);}

    .iIcon{
      width: 42px;height: 42px;
      border-radius: 16px;
      display:grid;place-items:center;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.10);
      flex: 0 0 auto;
      font-size: 18px;
    }

    .meta{min-width:0;flex: 1 1 auto;}
    .meta .name{font-weight: 1000;font-size: 14px;margin:0;letter-spacing:.2px;}
    .meta .desc{margin:6px 0 0;font-size: 12px;color: var(--muted);line-height:1.25;}

    .right{
      flex:0 0 auto;
      text-align:right;
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap: 6px;
    }

    .price{
      font-weight: 1100;
      font-size: 16px;
      letter-spacing:.2px;
      color: rgba(234,240,255,.95);
    }

    .ask{
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px dashed rgba(255,255,255,.18);
      background: rgba(0,0,0,.12);
      color: rgba(234,240,255,.78);
      white-space: nowrap;
    }

    .tag{
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.12);
      color: rgba(234,240,255,.85);
      white-space: nowrap;
    }

    /* INFO GRID */
    .infoGrid{margin-top: 14px;display:grid;gap:10px;grid-template-columns:1fr;}
    @media (min-width: 860px){.infoGrid{grid-template-columns:1fr 1fr;}}

    .info{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      padding: 12px;
    }
    .info h4{margin:0;font-size:13px;color: var(--accent2);display:flex;gap:8px;align-items:center;}
    .info p{margin:8px 0 0;color: var(--muted);font-size:13px;line-height: 1.35;}

    .footer{margin-top: 14px;text-align:center;color: rgba(234,240,255,.65);font-size: 12px;line-height:1.6;}

    /* BOTTOM BAR */
    .bottomBar{
      position: fixed;
      left:0;right:0;bottom:0;
      z-index: 50;
      padding: 10px 12px;
      background: linear-gradient(180deg, rgba(7,11,20,.0), rgba(7,11,20,.92) 35%, rgba(7,11,20,.98));
      border-top: 1px solid rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
    }
    .barInner{
      max-width: 980px;
      margin: 0 auto;
      display:flex;
      gap: 10px;
    }
    .barBtn{
      flex:1 1 0;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.07);
      color: var(--text);
      text-decoration:none;
      font-weight: 1000;
      box-shadow: 0 10px 25px rgba(0,0,0,.22);
    }
    .barBtn.primary{
      background: linear-gradient(135deg, rgba(255,214,107,.32), rgba(126,231,255,.14));
      border-color: rgba(255,214,107,.34);
    }
    .barText{display:flex;flex-direction:column;align-items:flex-start;line-height:1.1;}
    .barBtn small{display:block;font-weight:800;font-size:11px;color: rgba(234,240,255,.72);margin-top:2px;}

    /* tiny build badge (debug) */
    .buildBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      margin-top:10px;
      font-size:11px;
      color: rgba(234,240,255,.72);
    }
    .dot{
      width:8px;height:8px;border-radius:999px;background: var(--good);
      box-shadow: 0 0 0 3px rgba(124,255,178,.12);
    }
  </style>
</head>

<body>
  <div class="top">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">
          <h1 id="shopName"></h1>
          <p id="shopSub"></p>
        </div>
      </div>

      <div class="miniActions">
        <a class="btn" id="miniWhats" href="#" aria-label="WhatsApp">üí¨</a>
        <a class="btn primary" id="miniCall" href="#" aria-label="Ara">üìû</a>
      </div>
    </header>
  </div>

  <div class="wrap">
    <section class="hero">
      <div class="heroInner">
        <div class="heroText">
          <h2 id="heroTitle"></h2>
          <p id="heroText"></p>

          <div class="badges">
            <span class="pill">‚úÖ Temiz & D√ºzenli</span>
            <span class="pill">‚ö° Hƒ±zlƒ± Servis</span>
            <span class="pill">‚òï Sƒ±cak ƒ∞√ßecek</span>
            <span class="pill">ü•™ Taze Tost</span>
          </div>

          <div class="installHint">
            <b>Uygulama gibi kullanmak i√ßin:</b><br/>
            Android: Men√º (‚ãÆ) ‚Üí ‚ÄúAna ekrana ekle‚Äù<br/>
            iPhone: Payla≈ü (‚¨ÜÔ∏è) ‚Üí ‚ÄúAna Ekrana Ekle‚Äù
            <div class="buildBadge" title="G√ºncelleme kontrol etiketi">
              <span class="dot"></span>
              <span id="buildText"></span>
            </div>
          </div>
        </div>

        <div class="heroCards">
          <div class="heroCard">
            <h3>üì¢ Kampanya / Duyuru</h3>
            <p id="adText"></p>
            <small id="adSub"></small>
          </div>

          <div class="heroCard">
            <h3>‚≠ê √ñne √áƒ±kanlar</h3>
            <p id="featuredText"></p>
            <small>Arama kutusundan √ºr√ºnleri hƒ±zlƒ±ca bulabilirsiniz.</small>
          </div>
        </div>
      </div>
    </section>

    <div class="toolbar">
      <input class="search" id="search" placeholder="√úr√ºn ara: √ßay, tost, yumurta..." />
      <div class="tabs" id="tabs"></div>
    </div>

    <div class="list" id="list"></div>

    <div class="infoGrid">
      <div class="info">
        <h4>üïí √áalƒ±≈üma Saatleri</h4>
        <p id="hours"></p>
      </div>
      <div class="info">
        <h4>üìç Adres</h4>
        <p id="address"></p>
      </div>
    </div>

    <div class="footer">
      ¬© <span id="year"></span> <span id="footName"></span> ‚Ä¢ QR Men√º<br/>
      Fiyat deƒüi≈üirse sadece ‚Äúprice‚Äù deƒüerini g√ºncellemeniz yeterli.
    </div>
  </div>

  <div class="bottomBar">
    <div class="barInner">
      <a class="barBtn primary" id="callBtn" href="#">
        üìû
        <span class="barText">
          Ara
          <small id="phoneLabel"></small>
        </span>
      </a>
      <a class="barBtn" id="whatsBtn" href="#">
        üí¨
        <span class="barText">
          WhatsApp
          <small>Hƒ±zlƒ± mesaj</small>
        </span>
      </a>
    </div>
  </div>

  <script>
    // =========================
    // ‚úÖ SADECE BURAYI D√úZENLE
    // =========================

    // ‚úÖ Build etiketi: G√ºncelleme zorlamak i√ßin bunu artƒ±r (01 -> 02 gibi)
    // Commit atƒ±nca PWA da g√ºncellemeyi yakalasƒ±n diye sw.js'yi bu deƒüerle cache-bypass ediyoruz.
    const BUILD = "2026-01-01-02";

    const CONFIG = {
      shopName: "Cihangir √áay Ocaƒüƒ±",
      shopSub: "Sƒ±cak √ßay ‚Ä¢ Taze tost ‚Ä¢ Hƒ±zlƒ± servis",
      phoneLocal: "0507 319 02 78",
      phoneE164: "+905073190278",
      whatsappNumber: "905073190278",
      hours: "Her g√ºn 07:00 ‚Äì 23:00",
      address: "Adres: (buraya yazabilirsin)",
      heroTitle: "Ho≈ü geldiniz ‚òï",
      heroText: "Men√ºm√ºz g√ºnceldir. Aramak veya WhatsApp‚Äôtan yazmak i√ßin alttaki butonlarƒ± kullanabilirsiniz.",
      adText: "Bug√ºn: Tost + √áay kampanyasƒ± sorunuz! (Burayƒ± deƒüi≈ütirebilirsin)",
      adSub: "Afiyet olsun ‚Ä¢ Te≈üekk√ºrler",
      featured: ["√áay", "T√ºrk Kahvesi", "Ka≈üarlƒ± Tost", "Karƒ±≈üƒ±k Tost"]
    };

    // ‚úÖ MENU: price:0 => ‚ÄúFiyat Sor‚Äù
    const MENU = [
      // ƒ∞√áECEKLER
      { category: "ƒ∞√ßecekler", name: "√áay", price: 15, icon: "üçµ", desc: "Demli, sƒ±cak", tag: "Sƒ±cak" },
      { category: "ƒ∞√ßecekler", name: "T√ºrk Kahvesi", price: 85, icon: "‚òï", desc: "K√∂z tadƒ±nda", tag: "Kahve" },
      { category: "ƒ∞√ßecekler", name: "Nescafe", price: 40, icon: "ü•§", desc: "3'√º 1 arada / se√ßenekli", tag: "Kahve" },
      { category: "ƒ∞√ßecekler", name: "Oralet (√áe≈üitleri)", price: 15, icon: "üçä", desc: "Portakal / elma vb.", tag: "Sƒ±cak" },

      // TOSTLAR
      { category: "Tostlar", name: "Sadece Ka≈üarlƒ± Tost", price: 0, icon: "ü•™", desc: "Bol ka≈üarlƒ±", tag: "Tost" },
      { category: "Tostlar", name: "Sadece Sucuklu Tost", price: 0, icon: "ü•™", desc: "Bol sucuklu", tag: "Tost" },
      { category: "Tostlar", name: "Ka≈üarlƒ± + Sucuklu (Karƒ±≈üƒ±k)", price: 0, icon: "ü•™", desc: "Karƒ±≈üƒ±k", tag: "Tost" },
      { category: "Tostlar", name: "Kavurmalƒ± Tost", price: 0, icon: "ü•™", desc: "Kavurmalƒ±", tag: "Tost" },
      { category: "Tostlar", name: "Kavurmalƒ± + Ka≈üarlƒ±", price: 0, icon: "ü•™", desc: "Kavurma + ka≈üar", tag: "Tost" },
      { category: "Tostlar", name: "Kavurmalƒ± + Sucuklu", price: 0, icon: "ü•™", desc: "Kavurma + sucuk", tag: "Tost" },
      { category: "Tostlar", name: "Kavurmalƒ± + Ka≈üarlƒ± + Sucuklu (√ñzel)", price: 0, icon: "ü•™", desc: "√ñzel karƒ±≈üƒ±k", tag: "Tost" },

      // KAHVALTILIK
      { category: "Kahvaltƒ±lƒ±k", name: "Ha≈ülanmƒ±≈ü Yumurta", price: 0, icon: "ü•ö", desc: "Sƒ±cacƒ±k", tag: "Yiyecek" },
      { category: "Kahvaltƒ±lƒ±k", name: "Tavada Yumurta", price: 0, icon: "üç≥", desc: "ƒ∞stersen tereyaƒülƒ±", tag: "Yiyecek" },
      { category: "Kahvaltƒ±lƒ±k", name: "Sucuklu Yumurta (ƒ∞stersen)", price: 0, icon: "üç≥", desc: "Sucuklu", tag: "Yiyecek" },
      { category: "Kahvaltƒ±lƒ±k", name: "Menemen (ƒ∞stersen)", price: 0, icon: "üç≥", desc: "Domates-biber", tag: "Yiyecek" }
    ];

    // ---- DOKUNMA: Render/Filter ----
    const $ = (id) => document.getElementById(id);

    function formatPrice(p){
      if (!p || Number(p) === 0) return `<span class="ask">Fiyat Sor</span>`;
      return `<span class="price">${Number(p).toFixed(0)} ‚Ç∫</span>`;
    }

    function applyConfig(){
      $("shopName").textContent = CONFIG.shopName;
      $("footName").textContent = CONFIG.shopName;
      $("shopSub").textContent = CONFIG.shopSub;

      $("heroTitle").textContent = CONFIG.heroTitle;
      $("heroText").textContent = CONFIG.heroText;

      $("adText").textContent = CONFIG.adText;
      $("adSub").textContent = CONFIG.adSub;

      $("hours").textContent = CONFIG.hours;
      $("address").textContent = CONFIG.address;

      $("featuredText").textContent = (CONFIG.featured || []).join(" ‚Ä¢ ");

      $("phoneLabel").textContent = CONFIG.phoneLocal;

      $("buildText").textContent = `G√ºncelleme etiketi: ${BUILD}`;

      const msg = encodeURIComponent("Merhaba, men√ºden sipari≈ü vermek istiyorum.");
      const wa = `https://wa.me/${CONFIG.whatsappNumber}?text=${msg}`;
      $("whatsBtn").href = wa;
      $("miniWhats").href = wa;

      const tel = `tel:${CONFIG.phoneE164}`;
      $("callBtn").href = tel;
      $("miniCall").href = tel;
    }

    function getCategories(){
      const set = new Set(MENU.map(x => x.category || "Men√º"));
      return ["Hepsi", ...Array.from(set)];
    }

    function catIcon(cat){
      if (cat === "ƒ∞√ßecekler") return "‚òï";
      if (cat === "Tostlar") return "ü•™";
      if (cat === "Kahvaltƒ±lƒ±k") return "üç≥";
      if (cat === "Hepsi") return "‚ú®";
      return "üìå";
    }

    let state = { q: "", cat: "Hepsi" };

    function filterItems(){
      const q = (state.q || "").toLowerCase().trim();
      return MENU.filter(it => {
        const catOk = state.cat === "Hepsi" ? true : (it.category === state.cat);
        if (!catOk) return false;
        if (!q) return true;
        const hay = `${it.name||""} ${it.desc||""} ${it.tag||""} ${it.category||""}`.toLowerCase();
        return hay.includes(q);
      });
    }

    function groupByCategory(items){
      const map = new Map();
      for (const it of items){
        const k = it.category || "Men√º";
        if (!map.has(k)) map.set(k, []);
        map.get(k).push(it);
      }
      return map;
    }

    function renderTabs(){
      const el = $("tabs");
      el.innerHTML = "";
      const cats = getCategories();
      cats.forEach(cat => {
        const b = document.createElement("div");
        b.className = "tab" + (state.cat === cat ? " active" : "");
        b.textContent = `${catIcon(cat)} ${cat}`;
        b.onclick = () => { state.cat = cat; render(); };
        el.appendChild(b);
      });
    }

    function render(){
      renderTabs();
      const items = filterItems();
      const list = $("list");
      list.innerHTML = "";

      if (!items.length){
        const empty = document.createElement("div");
        empty.className = "item";
        empty.style.justifyContent = "center";
        empty.innerHTML = `
          <div class="meta" style="text-align:center;">
            <p class="name">Sonu√ß bulunamadƒ±</p>
            <p class="desc">Arama kelimesini deƒüi≈ütirip tekrar deneyin.</p>
          </div>`;
        list.appendChild(empty);
        return;
      }

      const grouped = groupByCategory(items);
      for (const [cat, arr] of grouped.entries()){
        const sec = document.createElement("div");
        sec.className = "sectionTitle";
        sec.innerHTML = `
          <div class="left">
            <div class="icon">${catIcon(cat)}</div>
            <div>
              <h3>${cat}</h3>
              <p>${arr.length} √ºr√ºn</p>
            </div>
          </div>
          <div class="chip">G√ºncel</div>
        `;
        list.appendChild(sec);

        arr.forEach(it => {
          const row = document.createElement("div");
          row.className = "item";
          row.innerHTML = `
            <div class="iIcon">${it.icon || "üçΩÔ∏è"}</div>
            <div class="meta">
              <p class="name">${it.name}</p>
              <p class="desc">${it.desc || ""}</p>
            </div>
            <div class="right">
              ${formatPrice(it.price)}
              <div class="tag">${it.tag || "Men√º"}</div>
            </div>
          `;
          list.appendChild(row);
        });
      }
    }

    $("search").addEventListener("input", (e) => {
      state.q = e.target.value || "";
      render();
    });

    $("year").textContent = new Date().getFullYear();
    applyConfig();
    render();

    // ‚úÖ PWA: G√ºncelleme yakalama (sert)
    // - sw.js'yi ?build ile cache bypass
    // - updateViaCache:'none' ile kontrol√º g√º√ßlendir
    // - g√∂r√ºn√ºr olunca update dene
    // - controllerchange olunca 1 kez reload
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", async () => {
        try {
          const reg = await navigator.serviceWorker.register(`./sw.js?build=${BUILD}`, { updateViaCache: "none" });

          // A√ßƒ±lƒ±≈üta update kontrol√º
          reg.update().catch(()=>{});

          let refreshing = false;
          navigator.serviceWorker.addEventListener("controllerchange", () => {
            if (refreshing) return;
            refreshing = true;
            window.location.reload();
          });

          document.addEventListener("visibilitychange", () => {
            if (document.visibilityState === "visible") {
              reg.update().catch(()=>{});
            }
          });
        } catch (e) {
          // sessiz
        }
      });
    }
  </script>
</body>
</html>
