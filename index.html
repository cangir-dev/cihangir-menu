<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cihangir √áay Ocaƒüƒ± | QR Men√º</title>
  <meta name="description" content="Cihangir √áay Ocaƒüƒ± QR Men√º" />
  <meta name="theme-color" content="#ffffff">
  <link rel="apple-touch-icon" href="./assets/apple-touch-icon.png">

  <style>
    :root{
      --bg:#fff9fb;
      --surface:#ffffff;
      --ink:#1f2a37;
      --muted:#55657a;
      --line:#ead7e5;

      --pink:#ff4d8d;
      --green:#22c55e;
      --blue:#60a5fa;

      --chip:#fff1f6;
      --chipLine:#ffd0e1;

      --shadow: 0 16px 44px rgba(31,42,55,.10);
      --r1:16px;
      --r2:22px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 520px at 12% -10%, rgba(255,77,141,.18), transparent 60%),
        radial-gradient(980px 520px at 110% 10%, rgba(34,197,94,.14), transparent 58%),
        radial-gradient(980px 520px at 18% 115%, rgba(96,165,250,.16), transparent 60%),
        var(--bg);
      min-height:100vh;
    }

    /* abartƒ±sƒ±z √ßi√ßek deseni */
    .flowers{
      position:fixed; inset:0; pointer-events:none; opacity:.14;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240' viewBox='0 0 240 240'%3E%3Cg fill='none' stroke='%23ff4d8d' stroke-width='1.2' opacity='0.55'%3E%3Cpath d='M54 46c10 10 10 26 0 36-10-10-26-10-36 0 10-10 10-26 0-36 10 10 26 10 36 0Z'/%3E%3Cpath d='M184 78c10 10 10 26 0 36-10-10-26-10-36 0 10-10 10-26 0-36 10 10 26 10 36 0Z'/%3E%3Cpath d='M98 166c10 10 10 26 0 36-10-10-26-10-36 0 10-10 10-26 0-36 10 10 26 10 36 0Z'/%3E%3C/g%3E%3Cg fill='none' stroke='%2322c55e' stroke-width='1.2' opacity='0.45'%3E%3Cpath d='M148 132c-8 12-24 15-36 7 8-12 5-28-7-36 12 8 28 5 36-7-8 12-5 28 7 36Z'/%3E%3C/g%3E%3C/svg%3E");
      background-size: 240px 240px;
      mix-blend-mode:multiply;
    }

    .top{
      position:sticky; top:0; z-index:50;
      background: rgba(255,249,251,.78);
      backdrop-filter: blur(10px);
      border-bottom:1px solid rgba(234,215,229,.9);
    }
    header{
      max-width:980px;margin:0 auto;padding:12px 14px;
      display:flex;align-items:center;justify-content:space-between;gap:12px;
    }
    .brand{display:flex;align-items:center;gap:12px;min-width:0;}
    .logo{
      width:46px;height:46px;border-radius:18px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,77,141,.88), rgba(255,77,141,.18) 60%, transparent 70%),
        radial-gradient(circle at 70% 70%, rgba(34,197,94,.70), rgba(34,197,94,.12) 60%, transparent 70%),
        #fff;
      border:1px solid rgba(234,215,229,.95);
      box-shadow: 0 10px 22px rgba(31,42,55,.08);
      flex:0 0 auto;
    }
    .title{min-width:0;line-height:1.2;}
    .title h1{
      margin:0;font-size:16px;letter-spacing:.2px;
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
    }
    .title p{
      margin:6px 0 0;font-size:12px;color:var(--muted);
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
    }

    .actions{display:flex;gap:10px;flex:0 0 auto;}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(234,215,229,.95);
      background:#fff;
      color:var(--ink);text-decoration:none;font-weight:900;font-size:13px;
      box-shadow: 0 10px 22px rgba(31,42,55,.08);
      user-select:none;
      transition: transform .08s ease;
    }
    .btn:active{transform:scale(.98)}
    .btn.primary{
      border-color: rgba(255,77,141,.28);
      background: linear-gradient(135deg, rgba(255,77,141,.18), rgba(96,165,250,.10));
    }

    .wrap{max-width:980px;margin:0 auto;padding:18px 14px 94px;}
    .card{
      background:rgba(255,255,255,.92);
      border:1px solid rgba(234,215,229,.95);
      border-radius: var(--r2);
      box-shadow: var(--shadow);
    }

    /* √úst kutu: Ayet + Namaz vakitleri */
    .dailyBox{padding:14px; display:grid; gap:12px;}
    .dailyTop{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;}
    .badge{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      background: var(--chip);
      border:1px solid var(--chipLine);
      color: rgba(31,42,55,.92);
      font-size:12px;font-weight:900;
      white-space:nowrap;
    }
    .metaLine{font-size:12px;color:var(--muted);font-weight:800;}

    .dailyGrid{display:grid; gap:12px;}
    @media(min-width:860px){ .dailyGrid{ grid-template-columns: 1.1fr .9fr; } }

    .ayatBox{
      border-radius:18px;
      border:1px solid rgba(234,215,229,.95);
      background: linear-gradient(135deg, rgba(255,77,141,.08), rgba(34,197,94,.08), rgba(96,165,250,.10));
      padding:12px;
    }
    .ayatRef{font-size:12px;color:var(--muted);font-weight:900;margin-top:4px;}
    .ayatText{margin-top:8px;font-size:14px;line-height:1.35;font-weight:900;color:rgba(31,42,55,.92);}
    .ayatNote{margin-top:8px;font-size:12px;color:var(--muted);line-height:1.35;}

    .prayerBox{
      border-radius:18px;
      border:1px solid rgba(234,215,229,.95);
      background:#fff;
      padding:12px;
    }
    .prayerHead{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;flex-wrap:wrap;}
    .prayerHead h3{margin:0;font-size:13px;letter-spacing:.2px;color: rgba(31,42,55,.92);}
    .loc{font-size:12px;color:var(--muted);font-weight:800;}

    .prayerGrid{
      margin-top:10px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:8px;
    }
    .timePill{
      padding:10px;
      border-radius:16px;
      border:1px solid rgba(234,215,229,.95);
      background: rgba(96,165,250,.06);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .timePill b{font-size:12px; color: rgba(31,42,55,.90);}
    .timePill span{font-weight:1000; color: rgba(31,42,55,.95);}
    .timePill.green{ background: rgba(34,197,94,.07); }
    .timePill.pink{ background: rgba(255,77,141,.07); }

    .prayerActions{
      margin-top:10px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .input{
      flex: 1 1 180px;
      min-width: 180px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(234,215,229,.95);
      background:#fff;
      outline:none;
      font-size:13px;
      box-shadow: 0 10px 22px rgba(31,42,55,.06);
    }
    .smallBtn{
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(234,215,229,.95);
      background: #fff;
      font-weight:950;
      font-size:13px;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(31,42,55,.06);
      user-select:none;
    }
    .smallBtn.primary{
      border-color: rgba(34,197,94,.30);
      background: linear-gradient(135deg, rgba(34,197,94,.14), rgba(96,165,250,.08));
    }
    .hint{margin-top:8px;font-size:12px;color:var(--muted);line-height:1.35;}

    /* Men√º */
    .hero{margin-top:14px;padding:14px;}
    .hero h2{margin:0;font-size:18px;}
    .hero p{margin:8px 0 0;font-size:13px;color:var(--muted);line-height:1.35;}

    .toolbar{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;}
    .search{
      flex:1 1 260px;min-width:220px;
      padding:12px;border-radius:16px;
      border:1px solid rgba(234,215,229,.95);
      background:#fff;color:var(--ink);
      outline:none;font-size:14px;
      box-shadow: 0 10px 22px rgba(31,42,55,.06);
    }
    .tabs{display:flex;gap:8px;flex-wrap:wrap;}
    .tab{
      padding:10px 12px;border-radius:999px;
      border:1px solid rgba(234,215,229,.95);
      background:#fff;
      color:rgba(31,42,55,.86);
      font-weight:950;font-size:12px;
      cursor:pointer;user-select:none;
      box-shadow: 0 10px 22px rgba(31,42,55,.06);
      transition: transform .08s ease;
    }
    .tab:active{transform:scale(.99)}
    .tab.active{
      border-color: rgba(255,77,141,.35);
      background: linear-gradient(135deg, rgba(255,77,141,.14), rgba(34,197,94,.08));
      color: rgba(31,42,55,.95);
    }

    .list{margin-top:14px;display:grid;gap:10px;}
    .sectionTitle{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      padding:12px;border-radius:18px;
      border:1px solid rgba(234,215,229,.95);
      background:#fff;
      box-shadow: 0 10px 22px rgba(31,42,55,.06);
    }
    .sectionLeft{display:flex;align-items:center;gap:10px;min-width:0;}
    .sectionIcon{
      width:40px;height:40px;border-radius:14px;
      display:grid;place-items:center;
      border:1px solid rgba(234,215,229,.95);
      background: linear-gradient(135deg, rgba(255,77,141,.10), rgba(96,165,250,.08));
      flex:0 0 auto;
      font-size:18px;
    }
    .sectionText h3{margin:0;font-size:14px;}
    .sectionText p{margin:6px 0 0;font-size:12px;color:var(--muted);}
    .chip2{
      font-size:11px;padding:6px 10px;border-radius:999px;
      border:1px solid rgba(234,215,229,.95);
      background: rgba(255,77,141,.06);
      color: rgba(31,42,55,.82);
      font-weight:900;
      white-space:nowrap;
    }

    .item{
      display:flex;gap:12px;align-items:center;
      padding:12px;border-radius:18px;
      border:1px solid rgba(234,215,229,.95);
      background:#fff;
      box-shadow: 0 12px 26px rgba(31,42,55,.08);
    }
    .iIcon{
      width:42px;height:42px;border-radius:16px;
      display:grid;place-items:center;
      border:1px solid rgba(234,215,229,.95);
      background: rgba(255,77,141,.06);
      flex:0 0 auto;
      font-size:18px;
    }
    .meta{min-width:0;flex:1 1 auto;}
    .meta .name{margin:0;font-weight:1000;font-size:14px;}
    .meta .desc{margin:6px 0 0;font-size:12px;color:var(--muted);line-height:1.25;}
    .right{flex:0 0 auto;text-align:right;display:flex;flex-direction:column;align-items:flex-end;gap:6px;}
    .price{font-weight:1100;font-size:16px;color:rgba(31,42,55,.95);}
    .ask{
      font-size:11px;padding:6px 10px;border-radius:999px;
      border:1px dashed rgba(234,215,229,1);
      background: rgba(83,97,115,.06);
      color: rgba(31,42,55,.70);
      font-weight:900;
      white-space:nowrap;
    }
    .tag{
      font-size:11px;padding:6px 10px;border-radius:999px;
      border:1px solid rgba(234,215,229,.95);
      background: rgba(34,197,94,.08);
      color: rgba(31,42,55,.80);
      font-weight:900;
      white-space:nowrap;
    }

    .infoGrid{margin-top:14px;display:grid;gap:10px;grid-template-columns:1fr;}
    @media(min-width:860px){.infoGrid{grid-template-columns:1fr 1fr;}}
    .info{padding:12px;border-radius:18px;border:1px solid rgba(234,215,229,.95);background:#fff;box-shadow:0 10px 22px rgba(31,42,55,.06);}
    .info h4{margin:0;font-size:13px;color: var(--blue);display:flex;gap:8px;align-items:center;}
    .info p{margin:8px 0 0;color:var(--muted);font-size:13px;line-height:1.35;}

    .footer{margin-top:14px;text-align:center;color:rgba(83,97,115,.85);font-size:12px;line-height:1.6;}

    .bottomBar{
      position:fixed;left:0;right:0;bottom:0;z-index:60;
      padding:10px 12px;
      background: rgba(255,249,251,.88);
      border-top:1px solid rgba(234,215,229,.9);
      backdrop-filter: blur(10px);
    }
    .barInner{max-width:980px;margin:0 auto;display:flex;gap:10px;}
    .barBtn{
      flex:1 1 0;
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:12px;border-radius:16px;
      border:1px solid rgba(234,215,229,.95);
      background:#fff;
      color:var(--ink);text-decoration:none;font-weight:1000;
      box-shadow: 0 12px 26px rgba(31,42,55,.08);
    }
    .barBtn.primary{
      background: linear-gradient(135deg, rgba(255,77,141,.16), rgba(96,165,250,.08));
      border-color: rgba(255,77,141,.25);
    }
    .barText{display:flex;flex-direction:column;align-items:flex-start;line-height:1.1;}
    .barBtn small{display:block;font-weight:850;font-size:11px;color:rgba(83,97,115,.85);margin-top:2px;}
  </style>
</head>

<body>
  <div class="flowers" aria-hidden="true"></div>

  <div class="top">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">
          <h1 id="shopName"></h1>
          <p id="shopSub"></p>
        </div>
      </div>
      <div class="actions">
        <a class="btn" id="miniWhats" href="#" aria-label="WhatsApp">üí¨</a>
        <a class="btn primary" id="miniCall" href="#" aria-label="Ara">üìû</a>
      </div>
    </header>
  </div>

  <div class="wrap">
    <!-- ‚úÖ Tek kutucuk: Ayet + Namaz Vakitleri -->
    <section class="card dailyBox">
      <div class="dailyTop">
        <span class="badge">üå∏ G√ºnl√ºk K√∂≈üe</span>
        <span class="metaLine" id="todayLine"></span>
      </div>

      <div class="dailyGrid">
        <div class="ayatBox">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;">
            <span class="badge">üìñ G√ºn√ºn Ayeti</span>
            <div class="ayatRef" id="ayatRef"></div>
          </div>
          <div class="ayatText" id="ayatText"></div>
          <div class="ayatNote" id="ayatNote"></div>
        </div>

        <div class="prayerBox">
          <div class="prayerHead">
            <div>
              <h3>üïå Namaz Vakitleri</h3>
              <div class="loc" id="locText">Konum bekleniyor‚Ä¶</div>
            </div>
            <span class="badge" id="calcBadge">‚è≥</span>
          </div>

          <div class="prayerGrid" id="prayerGrid" style="margin-top:10px;">
            <!-- JS dolduracak -->
          </div>

          <div class="prayerActions">
            <button class="smallBtn primary" id="btnLoc">üìç Konumdan Getir</button>
            <input class="input" id="cityInput" placeholder="≈ûehir (√∂rn: Yalova)" />
            <button class="smallBtn" id="btnCity">üèôÔ∏è ≈ûehirden Getir</button>
          </div>

          <div class="hint" id="hint">
            Konum izni verirsen otomatik gelir. ƒ∞zin yoksa ≈üehir yazarak da alabilirsin.
          </div>
        </div>
      </div>
    </section>

    <!-- Men√º -->
    <section class="card hero" style="margin-top:14px;">
      <h2 id="heroTitle"></h2>
      <p id="heroText"></p>
    </section>

    <div class="toolbar">
      <input class="search" id="search" placeholder="√úr√ºn ara: √ßay, tost, yumurta..." />
      <div class="tabs" id="tabs"></div>
    </div>

    <div class="list" id="list"></div>

    <div class="infoGrid">
      <div class="info">
        <h4>üïí √áalƒ±≈üma Saatleri</h4>
        <p id="hours"></p>
      </div>
      <div class="info">
        <h4>üìç Adres</h4>
        <p id="address"></p>
      </div>
    </div>

    <div class="footer">
      ¬© <span id="year"></span> <span id="footName"></span> ‚Ä¢ QR Men√º
    </div>
  </div>

  <div class="bottomBar">
    <div class="barInner">
      <a class="barBtn primary" id="callBtn" href="#">
        üìû
        <span class="barText">
          Ara
          <small id="phoneLabel"></small>
        </span>
      </a>
      <a class="barBtn" id="whatsBtn" href="#">
        üí¨
        <span class="barText">
          WhatsApp
          <small>Hƒ±zlƒ± mesaj</small>
        </span>
      </a>
    </div>
  </div>

  <script>
    // =========================
    // ‚úÖ SADECE BURAYI D√úZENLE
    // =========================
    const CONFIG = {
      shopName: "Cihangir √áay Ocaƒüƒ±",
      shopSub: "Renkli, ferah, sƒ±cak bir mola ‚òïüå∏",
      phoneLocal: "0507 319 02 78",
      phoneE164: "+905073190278",
      whatsappNumber: "905073190278",
      hours: "Her g√ºn 07:00 ‚Äì 23:00",
      address: "Adres: (buraya yazabilirsin)",
      heroTitle: "Ho≈ü geldiniz ‚òï",
      heroText: "Men√ºm√ºz g√ºnceldir. Aramak veya WhatsApp‚Äôtan yazmak i√ßin alttaki butonlarƒ± kullanabilirsiniz."
    };

    // price:0 => ‚ÄúFiyat Sor‚Äù
    const MENU = [
      { category: "ƒ∞√ßecekler", name: "√áay", price: 15, icon: "üçµ", desc: "Demli, sƒ±cak", tag: "Sƒ±cak" },
      { category: "ƒ∞√ßecekler", name: "T√ºrk Kahvesi", price: 85, icon: "‚òï", desc: "K√∂z tadƒ±nda", tag: "Kahve" },
      { category: "ƒ∞√ßecekler", name: "Nescafe", price: 40, icon: "ü•§", desc: "3'√º 1 arada / se√ßenekli", tag: "Kahve" },
      { category: "ƒ∞√ßecekler", name: "Oralet (√áe≈üitleri)", price: 15, icon: "üçä", desc: "Portakal / elma vb.", tag: "Sƒ±cak" },

      { category: "Tostlar", name: "Sadece Ka≈üarlƒ± Tost", price: 0, icon: "ü•™", desc: "Bol ka≈üarlƒ±", tag: "Tost" },
      { category: "Tostlar", name: "Sadece Sucuklu Tost", price: 0, icon: "ü•™", desc: "Bol sucuklu", tag: "Tost" },
      { category: "Tostlar", name: "Ka≈üarlƒ± + Sucuklu (Karƒ±≈üƒ±k)", price: 0, icon: "ü•™", desc: "Karƒ±≈üƒ±k", tag: "Tost" },
      { category: "Tostlar", name: "Kavurmalƒ± Tost", price: 0, icon: "ü•™", desc: "Kavurmalƒ±", tag: "Tost" },
      { category: "Tostlar", name: "Kavurmalƒ± + Ka≈üarlƒ±", price: 0, icon: "ü•™", desc: "Kavurma + ka≈üar", tag: "Tost" },
      { category: "Tostlar", name: "Kavurmalƒ± + Sucuklu", price: 0, icon: "ü•™", desc: "Kavurma + sucuk", tag: "Tost" },

      { category: "Kahvaltƒ±lƒ±k", name: "Ha≈ülanmƒ±≈ü Yumurta", price: 0, icon: "ü•ö", desc: "Sƒ±cacƒ±k", tag: "Yiyecek" },
      { category: "Kahvaltƒ±lƒ±k", name: "Tavada Yumurta", price: 0, icon: "üç≥", desc: "ƒ∞stersen tereyaƒülƒ±", tag: "Yiyecek" }
    ];

    // =========================
    // G√ºn√ºn Ayeti (g√ºne g√∂re otomatik)
    // (Kƒ±sa, anla≈üƒ±lƒ±r mesajlar ‚Äì telif riski yok)
    // =========================
    const AYAT_LIST = [
      { ref:"Ra‚Äôd 13:28", text:"Kalpler Allah‚Äôƒ± anmakla huzur bulur.", note:"Bug√ºn: Huzur ve ≈ü√ºk√ºr." },
      { ref:"ƒ∞n≈üirah 94:5", text:"Zorlukla beraber kolaylƒ±k vardƒ±r.", note:"Bug√ºn: Sabƒ±r ve umut." },
      { ref:"Bakara 2:286", text:"Kimseye g√ºc√ºn√ºn yetmediƒüi y√ºk y√ºklenmez.", note:"Bug√ºn: G√ºven ve dayanƒ±klƒ±lƒ±k." },
      { ref:"Z√ºmer 39:53", text:"√úmitsizliƒüe d√º≈ümeyin; rahmet geni≈ütir.", note:"Bug√ºn: Umut ve baƒüƒ±≈ülanma." },
      { ref:"Asr 103:1-3", text:"Zaman kƒ±ymetlidir: iman, iyi i≈ü, hakkƒ± ve sabrƒ± tavsiye.", note:"Bug√ºn: Zamanƒ± bereketli kullan." },
      { ref:"Hucur√¢t 49:10", text:"M√ºminler karde≈ütir; arayƒ± d√ºzeltin.", note:"Bug√ºn: G√∂n√ºl alma ve barƒ±≈ü." },
      { ref:"Nahl 16:97", text:"ƒ∞yi i≈ü yapanlara g√ºzel bir hayat vardƒ±r.", note:"Bug√ºn: ƒ∞yilik ve bereket." },
      { ref:"√Çl-i ƒ∞mr√¢n 3:159", text:"Kararlƒ± ol ve Allah‚Äôa tevekk√ºl et.", note:"Bug√ºn: Nezaket ve g√ºven." }
    ];

    // =========================
    // Namaz vakitleri: AlAdhan API
    // - Konumdan: timings?latitude=&longitude=
    // - ≈ûehirden: timingsByCity?city=&country=
    // =========================
    const ALADHAN_METHOD = 13; // T√ºrkiye i√ßin yaygƒ±n (Diyanet/Umum√Æ uyumlu)
    const COUNTRY_DEFAULT = "Turkey";

    // ---- yardƒ±mcƒ±lar ----
    const $ = (id) => document.getElementById(id);

    function todayTR(){
      const d = new Date();
      return d.toLocaleDateString("tr-TR", { weekday:"long", year:"numeric", month:"long", day:"numeric" });
    }

    function hashIndex(key, mod){
      let h = 0;
      for (let i=0;i<key.length;i++) h = (h*31 + key.charCodeAt(i)) >>> 0;
      return h % mod;
    }

    function ayetOfDay(){
      const d = new Date();
      const key = `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;
      return AYAT_LIST[hashIndex(key, AYAT_LIST.length)];
    }

    function renderAyet(){
      const a = ayetOfDay();
      $("ayatRef").textContent = a.ref;
      $("ayatText").textContent = a.text;
      $("ayatNote").textContent = a.note;
    }

    function applyConfig(){
      $("shopName").textContent = CONFIG.shopName;
      $("footName").textContent = CONFIG.shopName;
      $("shopSub").textContent = CONFIG.shopSub;

      $("heroTitle").textContent = CONFIG.heroTitle;
      $("heroText").textContent = CONFIG.heroText;

      $("hours").textContent = CONFIG.hours;
      $("address").textContent = CONFIG.address;

      $("phoneLabel").textContent = CONFIG.phoneLocal;

      const msg = encodeURIComponent("Merhaba, men√ºden sipari≈ü vermek istiyorum.");
      const wa = `https://wa.me/${CONFIG.whatsappNumber}?text=${msg}`;
      $("whatsBtn").href = wa;
      $("miniWhats").href = wa;

      const tel = `tel:${CONFIG.phoneE164}`;
      $("callBtn").href = tel;
      $("miniCall").href = tel;

      $("todayLine").textContent = todayTR();
    }

    function formatPrice(p){
      if (!p || Number(p) === 0) return `<span class="ask">Fiyat Sor</span>`;
      return `<span class="price">${Number(p).toFixed(0)} ‚Ç∫</span>`;
    }

    function catIcon(cat){
      if (cat === "ƒ∞√ßecekler") return "‚òï";
      if (cat === "Tostlar") return "ü•™";
      if (cat === "Kahvaltƒ±lƒ±k") return "üç≥";
      if (cat === "Hepsi") return "üå∏";
      return "üìå";
    }

    function getCategories(){
      const set = new Set(MENU.map(x => x.category || "Men√º"));
      return ["Hepsi", ...Array.from(set)];
    }

    let state = { q:"", cat:"Hepsi" };

    function filterItems(){
      const q = (state.q || "").toLowerCase().trim();
      return MENU.filter(it => {
        const catOk = state.cat === "Hepsi" ? true : (it.category === state.cat);
        if (!catOk) return false;
        if (!q) return true;
        const hay = `${it.name||""} ${it.desc||""} ${it.tag||""} ${it.category||""}`.toLowerCase();
        return hay.includes(q);
      });
    }

    function groupByCategory(items){
      const map = new Map();
      for (const it of items){
        const k = it.category || "Men√º";
        if (!map.has(k)) map.set(k, []);
        map.get(k).push(it);
      }
      return map;
    }

    function renderTabs(){
      const el = $("tabs");
      el.innerHTML = "";
      getCategories().forEach(cat => {
        const b = document.createElement("div");
        b.className = "tab" + (state.cat === cat ? " active" : "");
        b.textContent = `${catIcon(cat)} ${cat}`;
        b.onclick = () => { state.cat = cat; renderMenu(); };
        el.appendChild(b);
      });
    }

    function renderMenu(){
      renderTabs();
      const items = filterItems();
      const list = $("list");
      list.innerHTML = "";

      if (!items.length){
        const empty = document.createElement("div");
        empty.className = "item";
        empty.style.justifyContent = "center";
        empty.innerHTML = `
          <div class="meta" style="text-align:center;">
            <p class="name">Sonu√ß bulunamadƒ±</p>
            <p class="desc">Arama kelimesini deƒüi≈ütirip tekrar deneyin.</p>
          </div>`;
        list.appendChild(empty);
        return;
      }

      const grouped = groupByCategory(items);
      for (const [cat, arr] of grouped.entries()){
        const sec = document.createElement("div");
        sec.className = "sectionTitle";
        sec.innerHTML = `
          <div class="sectionLeft">
            <div class="sectionIcon">${catIcon(cat)}</div>
            <div class="sectionText">
              <h3>${cat}</h3>
              <p>${arr.length} √ºr√ºn</p>
            </div>
          </div>
          <div class="chip2">G√ºncel</div>
        `;
        list.appendChild(sec);

        arr.forEach(it => {
          const row = document.createElement("div");
          row.className = "item";
          row.innerHTML = `
            <div class="iIcon">${it.icon || "üçΩÔ∏è"}</div>
            <div class="meta">
              <p class="name">${it.name}</p>
              <p class="desc">${it.desc || ""}</p>
            </div>
            <div class="right">
              ${formatPrice(it.price)}
              <div class="tag">${it.tag || "Men√º"}</div>
            </div>
          `;
          list.appendChild(row);
        });
      }
    }

    $("search").addEventListener("input", (e) => {
      state.q = e.target.value || "";
      renderMenu();
    });

    // =========================
    // Namaz vakitleri render
    // =========================
    function setBadge(text){ $("calcBadge").textContent = text; }

    function renderPrayerTimes(times){
      // sadece gerekli olanlar
      const want = [
        { key:"Fajr",   label:"ƒ∞msak",  cls:"green" },
        { key:"Sunrise",label:"G√ºne≈ü",  cls:"" },
        { key:"Dhuhr",  label:"√ñƒüle",   cls:"" },
        { key:"Asr",    label:"ƒ∞kindi", cls:"" },
        { key:"Maghrib",label:"Ak≈üam",  cls:"pink" },
        { key:"Isha",   label:"Yatsƒ±",  cls:"" }
      ];

      const grid = $("prayerGrid");
      grid.innerHTML = "";

      want.forEach(w => {
        const t = (times[w.key] || "--:--").toString().replace(" (TRT)","").trim();
        const div = document.createElement("div");
        div.className = "timePill " + (w.cls || "");
        div.innerHTML = `<b>${w.label}</b><span>${t}</span>`;
        grid.appendChild(div);
      });
    }

    function showHint(text){
      $("hint").textContent = text;
    }

    async function fetchByCoords(lat, lon){
      // AlAdhan: timings endpoint
      const url = `https://api.aladhan.com/v1/timings?latitude=${encodeURIComponent(lat)}&longitude=${encodeURIComponent(lon)}&method=${ALADHAN_METHOD}`;
      const res = await fetch(url, { cache:"no-store" });
      if (!res.ok) throw new Error("Vakit servisine ula≈üƒ±lamadƒ±");
      const data = await res.json();
      const t = data?.data?.timings;
      if (!t) throw new Error("Vakit verisi bulunamadƒ±");
      return { timings: t, meta: data?.data?.meta };
    }

    async function fetchByCity(city){
      const url = `https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(city)}&country=${encodeURIComponent(COUNTRY_DEFAULT)}&method=${ALADHAN_METHOD}`;
      const res = await fetch(url, { cache:"no-store" });
      if (!res.ok) throw new Error("Vakit servisine ula≈üƒ±lamadƒ±");
      const data = await res.json();
      const t = data?.data?.timings;
      if (!t) throw new Error("Vakit verisi bulunamadƒ±");
      return { timings: t, meta: data?.data?.meta };
    }

    async function loadFromGeolocation(){
      setBadge("‚è≥");
      $("locText").textContent = "Konum alƒ±nƒ±yor‚Ä¶";
      showHint("Konum izni istenebilir. L√ºtfen izin verin.");

      if (!navigator.geolocation){
        setBadge("‚ö†Ô∏è");
        $("locText").textContent = "Konum desteklenmiyor";
        showHint("Bu cihazda konum alƒ±namadƒ±. ≈ûehir yazarak deneyin.");
        return;
      }

      navigator.geolocation.getCurrentPosition(async (pos) => {
        try{
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;

          const out = await fetchByCoords(lat, lon);
          renderPrayerTimes(out.timings);

          const tz = out?.meta?.timezone ? ` ‚Ä¢ ${out.meta.timezone}` : "";
          $("locText").textContent = `Konumdan alƒ±ndƒ±${tz}`;
          setBadge("‚úÖ");
          showHint("Vakitler g√ºncellendi. ≈ûehirle de deƒüi≈ütirebilirsiniz.");
        }catch(e){
          setBadge("‚ö†Ô∏è");
          $("locText").textContent = "Konumdan alƒ±namadƒ±";
          showHint("Servis veya baƒülantƒ± sorunu olabilir. ≈ûehir girerek deneyin.");
        }
      }, (err) => {
        setBadge("‚ö†Ô∏è");
        $("locText").textContent = "Konum izni yok";
        showHint("Konum izni verilmedi. ≈ûehir yazarak vakitleri alabilirsiniz.");
      }, { enableHighAccuracy:false, timeout: 8000, maximumAge: 600000 });
    }

    async function loadFromCity(){
      const city = ($("cityInput").value || "").trim();
      if (!city){
        showHint("L√ºtfen ≈üehir yazƒ±n: √∂rn. Yalova, ƒ∞stanbul, Bursa");
        return;
      }
      try{
        setBadge("‚è≥");
        $("locText").textContent = `${city} i√ßin alƒ±nƒ±yor‚Ä¶`;
        const out = await fetchByCity(city);
        renderPrayerTimes(out.timings);
        const tz = out?.meta?.timezone ? ` ‚Ä¢ ${out.meta.timezone}` : "";
        $("locText").textContent = `${city}${tz}`;
        setBadge("‚úÖ");
        showHint("Vakitler g√ºncellendi. ƒ∞stersen konumdan da alabilirsin.");
      }catch(e){
        setBadge("‚ö†Ô∏è");
        $("locText").textContent = "≈ûehirden alƒ±namadƒ±";
        showHint("Baƒülantƒ± sorunu olabilir. ≈ûehri farklƒ± yazƒ±p tekrar deneyin.");
      }
    }

    $("btnLoc").addEventListener("click", loadFromGeolocation);
    $("btnCity").addEventListener("click", loadFromCity);

    // ƒ∞lk y√ºkleme
    $("year").textContent = new Date().getFullYear();
    applyConfig();
    renderAyet();
    renderMenu();

    // otomatik konumdan dene (izin istemek normal)
    loadFromGeolocation();
  </script>
</body>
</html>
